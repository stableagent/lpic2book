# 210.1. پیکربندی DHCP

## **210.1 DHCP configuration**

**وزن:** 2

**توضیحات:** داوطلبان باید بتوانند یک سرور DHCP را پیکربندی کنند. این هدف شامل تنظیم گزینه‌های پیش‌فرض و هر کلاینت، اضافه کردن میزبان‌های استاتی و BOOTP است. همچنین شامل پیکربندی یک عامل رله DHCP و حفظ سرور DHCP است.

**نواحی کلیدی دانش:**

* فایل‌ها، اصطلاحات و ابزارهای پیکربندی DHCP
* تنظیم Subnet و محدوده تخصیص دینامیک
* آگاهی از DHCPv6 و آگهی‌های روتر IPv6

**اصطلاحات و ابزارها:**

* dhcpd.conf
* dhcpd.leases
* پیام‌های Log DHCP در syslog یا systemd journal
* arp
* dhcpd
* radvd
* radvd.conf

## DHCP چیست؟

پروتکل پیکربندی میزبان دینامیک (DHCP) یک پروتکل شبکه است که برای فعال کردن کامپیوترهای میزبان برای اختصاص خودکار آدرس‌های IP و پیکربندی‌های شبکه مرتبط از یک سرور استفاده می‌شود. DHCP نیاز به یک مدیر شبکه یا یک کاربر برای اختصاص دستی آدرس‌های IP به تمام دستگاه‌های شبکه را کاهش می‌دهد.

## DHCP چگونه کار می‌کند؟

مراحل زیر نشان می‌دهد که DHCP چگونه واقعاً کار می‌کند:

![](.gitbook/assets/DHCP-How.jpg)

1. وقتی یک کلاینت (که برای استفاده از DHCP پیکربندی شده) و به یک شبکه متصل است بوت می‌شود، یک بسته DHCPDISCOVER را به تمام شبکه broadcast می‌کند و تلاش می‌کند تا یک سرور DHCP روی سیم پیدا کند.
2. روتر/سوئیچ DHCPDISCOVER را به سرور DHCP مناسب (همانطور که پیکربندی شده) ارسال می‌کند. وقتی سرور DHCP بسته درخواست DHCPDISCOVER را دریافت می‌کند، با یک بسته DHCPOFFER پاسخ می‌دهد. بر اساس پیکربندی آدرس‌های موجود، آدرس سخت‌افزاری کلاینت و/یا نام میزبان و پیکربندی نرم‌افزار سرور DHCP آدرس مناسب را برای اختصاص به ماشینی که درخواست را مبداء کرده تعیین می‌کند. آدرس به طور موقت برای کلاینت رزرو می‌شود.
3. سپس کلاینت بسته DHCPOFFER را می‌گیرد و یک بسته DHCPREQUEST به سرور می‌فرستد که نشان می‌دهد آماده است تا اطلاعات پیکربندی شبکه ارائه شده در بسته DHCPOFFER را دریافت کند.
4. در نهایت، بعد از اینکه سرور DHCP بسته DHCPREQUEST را از کلاینت دریافت می‌کند، یک بسته DHCPACK می‌فرستد که نشان می‌دهد کلاینت اکنون اجازه دارد از آدرس IP اختصاص داده شده به آن برای (پیکربندی شده) مدت زمان استفاده کند.

DHCP از پورت udp شماره 67 به طور پیش‌فرض استفاده می‌کند.

## پیاده‌سازی سرور DHCP

بسته‌های DHCP (در سمت سرور) به طور معمول در اکثر توزیع‌ها به طور پیش‌فرض نصب نمی‌شوند.

* بسته‌ها می‌توانند باشند:
* dhcp
* dhcp-server
* isc-dhcp-server (قدیمی‌تر)
* dhcp3-server (هدف Objectivd آزمون LPIC-2)
