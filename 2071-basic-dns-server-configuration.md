# 207.1. پیکربندی اساسی سرور DNS

## **207.1 Basic DNS server configuration**

**وزن:** 3

**توضیحات:** داوطلبان باید بتوانند BIND را پیکربندی کنند تا به عنوان یک سرور DNS فقط cache عمل کند. این هدف شامل توانایی مدیریت یک سرور در حال اجرا و پیکربندی logging است.

**نواحی کلیدی دانش:**

* فایل‌های پیکربندی BIND 9.x، اصطلاحات و ابزارها
* تعریف مکان فایل‌های zone BIND در فایل‌های پیکربندی BIND
* بارگذاری مجدد پیکربندی و فایل‌های zone اصلاح شده
* آگاهی از dnsmasq، djbdns و PowerDNS به عنوان سرورهای نام جایگزین

**لیست زیر لیست جزئی از فایل‌ها، اصطلاحات و ابزارهای استفاده شده است:**

* /etc/named.conf
* /var/named/
* /usr/sbin/rndc
* kill
* host
* dig

## DNS چیست؟

سی سال پیش، وقتی می‌خواستیم از یک وب‌سایت بازدید کنیم باید آدرس IP آن سایت را می‌دانستیم. این به این دلیل است که کامپیوترها هستند و فقط قادر به ارتباط با اعداد هستند. از آنجا که ما انسان هستیم و ربات نیستیم، به یاد آوردن بسیار سخت است. ما راهی نیاز داشتیم تا اطلاعات قابل خواندن برای کامپیوتر را به قابل خواندن برای انسان تبدیل کنیم. اولین ایده استفاده از فایل‌های host عالی به نظر می‌رسید اما با گذشت زمان و رشد اینترنت مفید نبود.

در اوایل دهه 1980، پل موکاپتریس سیستمی ابداع کرد که به طور خودکار آدرس‌های IP را به نام‌های دامنه نگاشت کرد. و DNS متولد شد. بنابراین سیستم نام دامنه (DNS) نام‌های دامنه قابل خواندن برای انسان (مانند: www.google.com) را به آدرس‌های پروتکل اینترنت (IP) (مانند: 172.217.16.206) تبدیل می‌کند. DNS هنوز به عنوان ستون فقرات اینترنت مدرن، امروزه خدمت می‌کند.

## ساختار DNS

سیستم نام دامنه (DNS) یک سیستم نام‌گذاری سلسله‌مراتب غیرمتمرکز برای کامپیوترها، سرویس‌ها، یا سایر منابع متصل به اینترنت یا یک شبکه خصوصی است.

![](<.gitbook/assets/DNS Structure.png>)

در بالاترین سطح "." به عنوان ریشه در نظر گرفته می‌شود و در سطوح پایین‌تر دامنه‌های سطح بالا (TLD) وجود دارند.

وقتی یک کوئری توسط name server دریافت می‌شود، اول به cache آن نگاه می‌کند، اگر پاسخ پیدا شود آنگاه name server کوئری را از cache خود پاسخ می‌دهد.

اگر چیزی در cache پیدا نشود، آنگاه تلاش می‌کند تا اجزای کوچک‌تر کوئری را تطبیق دهد تا پاسخی برگرداند تا به کلاینت کمک کند کوئری خود را به یک name server دیگر ارسال کند.

## چگونه کار می‌کند؟

وقتی www.google.com را تایپ می‌کنیم، سیستم به دنبال www.google.com خواهد گشت. هرزمان که یک نام دامنه را تایپ می‌کنیم، یک "." (نقطه) پنهان در انتهای www.google.com وجود دارد که می‌گوید به جستجوی سرور ریشه namespace بگردید.

![](.gitbook/assets/HowDNSworks.jpg)

سپس روتر ما با سرویس DNS پیش‌فرض خود برای حل DNS تماس می‌گیرد. سرویس DNS با سرورهای Root DNS تماس می‌گیرد و برای آدرس IP سرور شامل رکوردهای .com سوال می‌کند. این آدرس به سرویس DNS شما ارسال می‌شود. سرویس DNS دوباره به Name Server شامل آدرس‌های دامنه‌های .com می‌رسد و از آن برای آدرس [http://google.com](http://google.com) سوال می‌کند. پس از به دست آوردن آدرس IP سرورهایی که google.com را میزبانی می‌کنند، سرویس DNS ما آدرس IP را به کامپیوتر ما برمی‌گرداند که سپس مرورگر ما را برای دانلود صفحه وب اصلی آغاز می‌کند. سرورهای ریشه کجا تعریف شده‌اند؟
```
root@server1:/etc/bind# cat db.root
;       This file holds the information on root name servers needed to
;       initialize cache of Internet domain name servers
;       (e.g. reference this file in the "cache  .  <file>"
;       configuration file of BIND domain name servers).
;
;       This file is made available by InterNIC
;       under anonymous FTP as
;           file                /domain/named.cache
;           on server           FTP.INTERNIC.NET
;       -OR-                    RS.INTERNIC.NET
;
;       last update:    February 17, 2016
;       related version of root zone:   2016021701
;
;       formerly NS.INTERNIC.NET
;
.                        3600000      NS    A.ROOT-SERVERS.NET.
A.ROOT-SERVERS.NET.      3600000      A     198.41.0.4
