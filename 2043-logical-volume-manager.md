# 204.3. مدیریت حجم منطقی

## **204.3 Logical Volume Manager**

**وزن:** 3

**توضیحات:** داوطلبان باید بتوانند حجم‌های منطقی، گروه‌های حجم و حجم‌های فیزیکی را ایجاد و حذف کنند. این هدف شامل snapshotها و تغییر اندازه حجم‌های منطقی است.

**نواحی کلیدی دانش:**

* ابزارها در مجموعه LVM
* تغییر اندازه، تغییر نام، ایجاد و حذف حجم‌های منطقی، گروه‌های حجم و حجم‌های فیزیکی
* ایجاد و حفظ snapshotها
* فعال کردن گروه‌های حجم

**اصطلاحات و ابزارها:**

* /sbin/pv\*
* /sbin/lv\*
* /sbin/vg\*
* mount
* /dev/mapper/
* lvm.conf

## LVM

در مدیریت ذخیره‌سازی سنتی، سیستم عامل به دنبال Disk Drives مانند /dev/sda، /dev/sdb می‌گردد و سپس به دنبال این نگاه می‌کند چه پارتیشن‌هایی روی دیسک‌ها موجود هستند مانند /dev/sda1، /dev/sdb1. پارتیشن‌ها محدود به دیسک‌ها هستند و بسیار انعطاف‌پذیر نیستند. مدیریت حجم منطقی (LVM) با ایجاد یک لایه انتزاع بین سیستم عامل و دستگاه‌های دیسک، انعطاف‌پذیری را به ما می‌دهد.

LVM با انتزاع لایه‌های abstractions روی بالای دستگاه‌های ذخیره فیزیکی کار می‌کند، لایه‌های اساسی که LVM استفاده می‌کند به شرح زیر است:

![](.gitbook/assets/LVM.jpg)

* حجم‌های فیزیکی(pv): یک حجم فیزیکی معمولاً یک هارد دیسک است، با این حال ممکن است دستگاهی باشد که شبیه یک هارد دیسک به نظر می‌رسد (مثلاً: دستگاه raid نرم‌افزاری). این می‌تواند یک پارتیشن یا تمام دیسک باشد.
* گروه‌های حجم(vg): گروه حجم سطح مرکزی و قلب LVM است. این یک مجموعه از حجم‌های فیزیکی را جمع می‌کند و یک استخرج از منابع ذخیره متفاوت ایجاد می‌کند.
* حجم‌های منطقی(lv): معادل یک پارتیشن دیسک در یک سیستم غیر LVM است. حجم منطقی فضای دیسک را از فضای دیسک که روی گروه حجم در دسترس است می‌گیرد. روی بالای حجم‌های منطقی ما سیستم‌های فایل (xfs، ext4، ...) ایجاد می‌کنیم

LVM قادر است انجام عملیات مانند افزایش و کاهش اندازه یک حجم منطقی (که بعداً در مورد آن صحبت خواهیم کرد) از آنجا که حجم فیزیکی از تکه‌های کوچک که همیشه اندازه ثابت دارند ساخته شده است. هر دیسک فیزیکی که ترکیبی در ساخت یک گروه حجم می‌کند، تعداد زیادی از تکه‌های مساوی اندازه خواهد داشت، که داده در آنجا ساکنت می‌شود.

![](.gitbook/assets/LVMPELE.jpg)

این تکه‌های کوچک مساوی اندازه که حجم‌های فیزیکی را تشکیل می‌دهند به عنوان Physical Extents شناخته می‌شوند. ایجاد یک گروه حجم به سادگی تمام physical extents تمام حجم‌های فیزیکی را ترکیب می‌کند تا یک گروه حجم منطقی بزرگ شکل دهد.

سیستم‌های مبتنی بر Redhat به طور پیش‌فرض از LVM استفاده می‌کنند، آن‌ها LVM را در طول نصب setup می‌کنند، بنابراین اینجا ما از ubuntu برای ایجاد lvm استفاده می‌کنیم:

```
root@server2:~# apt-get install lvm2
```

### کار با حجم‌های فیزیکی(pv)
